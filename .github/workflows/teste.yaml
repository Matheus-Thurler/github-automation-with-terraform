#name: Teste
#on:
#    workflow_dispatch:
#        inputs:
#            create_repository:
#                options:
#                    - true
#                    - false
#                default: true
#                required: false
#                type: choice
#            language:
#                options:
#                    - python
#                    - node
#                    - go
#            type_project:
#                options:
#                    - sta
#                    - srv
# Nome do workflow, para f√°cil identifica√ß√£o
name: Teste de Conex√£o com Self-Hosted Runner

# Gatilho manual: permite que voc√™ rode este workflow clicando em um bot√£o na interface do GitHub.
on:
  workflow_dispatch:

jobs:
  # Nome do job
  test-runner-connection:

    # --- ESTA √â A LINHA MAIS IMPORTANTE ---
    # Define que este job DEVE rodar em um runner com a label 'self-hosted'.
    # Se voc√™ usou uma label diferente na sua configura√ß√£o do RunnerDeployment, mude aqui.
    runs-on: self-hosted

    steps:
      - name: 1. Onde estou rodando?
        run: |
          echo "Este job est√° rodando em:"
          hostname
          echo "---------------------------"

      - name: 2. Qual o diret√≥rio de trabalho?
        run: |
          echo "O diret√≥rio atual √©:"
          pwd
          echo "---------------------------"
          echo "Conte√∫do do diret√≥rio:"
          ls -la
          echo "---------------------------"

      - name: 3. Quem sou eu?
        run: |
          echo "Executando como o usu√°rio:"
          whoami
          echo "---------------------------"

      - name: 4. O kubectl est√° dispon√≠vel?
        run: |
          echo "Verificando a vers√£o do kubectl..."
          # Este comando testa se o kubectl est√° no PATH, sem precisar de autentica√ß√£o completa.
          kubectl version --client
          echo "---------------------------"

      - name: 5. Teste conclu√≠do!
        run: echo "üéâ O runner self-hosted respondeu e executou o job com sucesso!"
